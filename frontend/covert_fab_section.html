            <h1 style="font-size: 32px; font-weight: bold; margin-bottom: 20px; margin-top: 40px; color: #333;">Covert fab</h1>
            <div class="section-description" style="margin-bottom: 20px;">
            The PRC might build a covert fab using semiconductor manufacturing equipment (SME) diverted before the AI agreement takes effect. According to our model, it's only worthwhile for the PRC to build a covert fab if it can divert >90% of this SME from domestic suppliers, and can use it to build a covert fab at the <span id="minProcessNode">--</span>nm process node or below. Otherwise, the probability of detection is too high and the compute output too low.
            <br><br>
            Across simulation runs, these conditions are met <span id="fabBuiltPercentage">--</span>% of the time. The plots below only show results across these simulation runs, where a covert fab is built.
            </div>
                
            <div id="projectNotRun" style="display: none; padding: 40px; text-align: center;">
                <p style="font-size: 18px; color: #666;">Project not run</p>
            </div>

            <div id="plotsContent">
            <div id="covertFabTopSection" style="display: flex; flex-wrap: wrap; gap: 20px; margin-bottom: 10px; align-items: flex-start;">
                <div class="dashboard" style="flex: 0 0 auto; width: 240px; padding: 20px; display: flex; flex-direction: column; gap: 0; justify-content: flex-start;">
                    <div class="plot-title" style="text-align: center; border-bottom: 1px solid #ddd; padding-bottom: 8px; margin: 0 0 20px 0;">Median outcome</div>
                    <div class="dashboard-item" style="margin: 0 0 20px 0;">
                        <div class="dashboard-value" id="dashboard80thCombined">--</div>
                        <div class="dashboard-label">of production before detection</div>
                        <div class="dashboard-sublabel" id="dashboardDetectionLabel">Detection means ≥5x update</div>
                    </div>
                    <div class="dashboard-item" style="margin: 0 0 20px 0;">
                        <div class="dashboard-value-small" id="dashboardProbFabBuilt">--</div>
                        <div class="dashboard-label-light">probability covert fab is built</div>
                    </div>
                    <div class="dashboard-item" style="margin: 0 0 20px 0;">
                        <div class="dashboard-value-small" id="dashboard80thTime">--</div>
                        <div class="dashboard-label-light">years operational before detection</div>
                    </div>
                    <div class="dashboard-item" style="margin: 0;">
                        <div class="dashboard-value-small" id="dashboard80thNode">--</div>
                        <div class="dashboard-label-light">process node</div>
                    </div>
                </div>

                <div class="plot-container" style="flex: 1 1 200px; min-width: 200px; padding: 20px; display: flex; flex-direction: column; height: auto;">
                    <div class="plot-title" style="text-align: center; border-bottom: 1px solid #ddd; padding-bottom: 8px; margin-bottom: 10px; margin-top: 0;">Covert compute produced before detection</div>
                    <div id="computeCcdfPlot" class="plot" style="flex: 1; min-height: 0;"></div>
                </div>

                <div class="plot-container" style="flex: 1 1 200px; min-width: 200px; padding: 20px; display: flex; flex-direction: column; height: auto;">
                    <div class="plot-title" style="text-align: center; border-bottom: 1px solid #ddd; padding-bottom: 8px; margin-bottom: 10px; margin-top: 0;">Simulation runs</div>
                    <div id="timeSeriesPlot" class="plot" style="flex: 1; min-height: 0;"></div>
                </div>
            </div>

            <div class="breakdown-section" id="covertFabComputeProductionBreakdown" style="margin-top: 30px;">
                <h2 style="font-size: 28px; font-weight: 700; margin-bottom: 10px; color: #222; text-align: left; letter-spacing: -0.5px;">Breaking down fab production</h2>
                <div class="section-description" style="margin-bottom: 20px; text-align: left; font-size: 15px;">
                    The compute produced by a covert fab depends on when the fab finishes construction, the production capacity (which is determined by how many people operate the fab and how much SME is diverted for its construction), the yield, and the compute density of the chips.
                </div>
                <div class="breakdown-plots-row">
                    <div class="breakdown-item">
                        <div id="isOperationalPlot" class="breakdown-plot"></div>
                        <div class="breakdown-label">Probability construction has finished</div>
                        <div class="breakdown-description">Construction time depends on fab capacity (wafers/month) and available workers, based on <span id="param-construction-time-5k" class="param-link">5k wafer/month</span> and <span id="param-construction-time-100k" class="param-link">100k wafer/month</span> benchmarks.</div>
                    </div>
                    <div class="operator" style="position: relative; height: 240px; display: flex; align-items: center; justify-content: center;">
                        <div style="font-size: 24px; font-weight: bold; color: #666;">×</div>
                    </div>
                    <div class="breakdown-item">
                        <div id="waferStartsPlot" class="breakdown-plot"></div>
                        <div class="breakdown-label">Production capacity (wafer starts per month)</div>
                        <div class="breakdown-description">Production capacity is the minimum of labor constraints (<span id="param-wafers-per-worker" class="param-link">24.6</span> wafers/month per operating worker) and SME constraints (scanners × 1000 wafers/month).</div>
                    </div>
                    <div class="operator">
                        ×
                    </div>
                    <div class="breakdown-box-item">
                        <div style="display: flex; align-items: flex-start; gap: 10px;">
                            <div id="chipsPerWaferPlot" class="breakdown-box">
                                <div style="display: flex; flex-direction: column; align-items: center; gap: 10px;">
                                    <div></div>
                                    <div class="breakdown-label">Working H100-sized chips per wafer</div>
                                    <div class="breakdown-description">Yield based on <span id="param-chips-per-wafer" class="param-link">28</span> H100-sized chips per wafer (TSMC's yield for H100s).</div>
                                </div>
                            </div>
                            <div class="operator-inline">
                                ×
                            </div>
                        </div>
                    </div>
                    <div class="operator">
                        ×
                    </div>
                    <div class="breakdown-item">
                        <div id="computePerChipPlot" class="breakdown-plot"></div>
                        <div class="breakdown-label">Transistor density relative to H100</div>
                        <div class="breakdown-description">Transistor density scales with process node improvement. Density increases <span id="param-transistor-density-exponent" class="param-link">2x</span> for every halving of process node (e.g., 28nm → 14nm).</div>
                    </div>
                    <div class="operator">
                        ×
                    </div>
                    <div class="breakdown-box-item">
                        <div style="display: flex; align-items: flex-start; gap: 10px;">
                            <div id="architectureEfficiencyDisplay" class="breakdown-box">
                                <div style="display: flex; flex-direction: column; align-items: center; gap: 10px;">
                                    <div>--</div>
                                    <div class="breakdown-label">Architecture efficiency (relative to H100)</div>
                                    <div class="breakdown-description">Architecture improves at <span id="param-architecture-efficiency" class="param-link">1.23x</span> per year based on historical chip performance improvements beyond transistor density gains.</div>
                                </div>
                            </div>
                            <div class="operator-inline">
                                =
                            </div>
                        </div>
                    </div>
                    <div class="operator">
                        =
                    </div>
                    <div class="breakdown-item">
                        <div id="totalComputePlot" class="breakdown-plot"></div>
                        <div class="breakdown-label">Compute produced per month (H100e / month)</div>
                        <div class="breakdown-description">Total monthly compute production in H100-equivalent units, combining production capacity, yield, transistor density, and architecture improvements.</div>
                    </div>
                </div>

                <div class="section-description" style="margin-top: 40px; margin-bottom: 20px; text-align: left; font-size: 15px;">
                    Equally important is energy efficiency, which is a direct function of the process node.
                </div>
                <div class="breakdown-plots-row">
                    <div class="breakdown-item">
                        <div id="energyTransistorDensityPlot" class="breakdown-plot"></div>
                        <div class="breakdown-label">Transistor density relative to H100</div>
                        <div class="breakdown-description">Same as compute production: density increases <span id="param-transistor-density-exponent-2" class="param-link">2x</span> for every halving of process node.</div>
                    </div>
                    <div class="operator arrow-operator" style="position: relative; height: 240px; display: flex; align-items: center; justify-content: center; flex-direction: column;">
                        <div style="font-size: 9px; text-align: center; color: #888; line-height: 1.3; margin-bottom: 5px;">Plug into</div>
                        <div style="font-size: 20px; color: #666;">→</div>
                    </div>
                    <div class="breakdown-item">
                        <div id="densityVsEfficiencyPlot" class="breakdown-plot"></div>
                        <div class="breakdown-label">Watts per performance relative to H100</div>
                        <div class="breakdown-description">Energy efficiency follows W/TPP ∝ (density)^exponent. Exponent is <span id="param-watts-exponent-before" class="param-link">-0.5</span> before Dennard scaling ended (2006) and <span id="param-watts-exponent-after" class="param-link">-0.15</span> after.</div>
                    </div>
                    <div class="operator">
                        ×
                    </div>
                    <div class="breakdown-box-item">
                        <div style="display: flex; align-items: flex-start; gap: 10px;">
                            <div id="h100EnergyDisplay" class="breakdown-box">
                                <div style="display: flex; flex-direction: column; align-items: center; gap: 10px;">
                                    <div>--</div>
                                    <div class="breakdown-label">Energy requirements of H100</div>
                                    <div class="breakdown-description">H100 power consumption is <span id="param-h100-power" class="param-link">700</span>W per chip.</div>
                                </div>
                            </div>
                            <div class="operator-inline">
                                ×
                            </div>
                        </div>
                    </div>
                    <div class="operator">
                        ×
                    </div>
                    <div class="breakdown-item">
                        <div id="energyComputePerMonthPlot" class="breakdown-plot"></div>
                        <div class="breakdown-label">Compute produced per month (H100e / month)</div>
                        <div class="breakdown-description">Same as the compute production result above, showing monthly H100-equivalent production.</div>
                    </div>
                    <div class="operator" style="position: relative; height: 240px; display: flex; align-items: center; justify-content: center;">
                        <div style="font-size: 24px; font-weight: bold; color: #666;">=</div>
                    </div>
                    <div class="breakdown-item">
                        <div id="energyPerMonthPlot" class="breakdown-plot"></div>
                        <div class="breakdown-label">Energy requirements per month (GW / month)</div>
                        <div class="breakdown-description">Total energy required to produce chips each month, combining compute output, efficiency scaling, and H100 power requirements.</div>
                    </div>
                </div>
            </div>
            </div>
