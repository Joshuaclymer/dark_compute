<style>
    .sidebar {
        width: 350px;
        min-width: 250px;
        max-width: 450px;
        background-color: #f5f5f5;
        padding: 20px;
        overflow-y: auto;
        border-right: 1px solid #ddd;
        flex-shrink: 0;
    }

    @media (max-width: 1400px) {
        .sidebar {
            width: 300px;
            min-width: 250px;
        }
    }

    @media (max-width: 1200px) {
        .sidebar {
            width: 280px;
            min-width: 250px;
        }
    }

    @media (max-width: 1000px) {
        .sidebar {
            width: 250px;
            min-width: 200px;
            padding: 15px;
        }
    }

    .sidebar h1 {
        font-size: 20px;
        margin-bottom: 20px;
        color: #333;
    }

    .sidebar h2 {
        font-size: 16px;
        margin-top: 20px;
        margin-bottom: 10px;
        color: #555;
        border-bottom: 1px solid #ccc;
        padding-bottom: 5px;
    }

    .param-group {
        margin-bottom: 15px;
    }

    .param-group label {
        display: block;
        font-size: 13px;
        margin-bottom: 5px;
        color: #666;
    }

    .param-group input,
    .param-group select {
        width: 100%;
        min-width: 0;
        max-width: 100%;
        padding: 8px;
        border: 1px solid #ccc;
        border-radius: 4px;
        font-size: 13px;
        box-sizing: border-box;
    }

    .param-group input[type="checkbox"] {
        width: auto;
        margin-right: 5px;
    }

    .localization-row {
        display: flex;
        gap: 8px;
        margin-bottom: 15px;
    }

    .localization-row .param-group {
        flex: 1;
        margin-bottom: 0;
    }

    .localization-row label {
        font-size: 11px;
    }

    .localization-row input {
        padding: 6px;
    }

    .param-group.has-tooltip {
        position: relative;
    }

    button {
        width: 100%;
        padding: 12px;
        background-color: #007bff;
        color: white;
        border: none;
        border-radius: 4px;
        font-size: 14px;
        cursor: pointer;
        margin-top: 20px;
    }

    button:hover {
        background-color: #0056b3;
    }

    button:disabled {
        background-color: #ccc;
        cursor: not-allowed;
    }

    .status {
        padding: 10px;
        margin-top: 10px;
        border-radius: 4px;
        font-size: 13px;
    }

    .status.info {
        background-color: #d1ecf1;
        color: #0c5460;
    }

    .status.error {
        background-color: #f8d7da;
        color: #721c24;
    }

    .status.success {
        background-color: #d4edda;
        color: #155724;
    }
</style>

<div class="sidebar">
    <h1>Model Parameters</h1>

    <button id="runSimulation">Run Simulation</button>

    <div id="status"></div>

    <h2>Simulation Settings</h2>
    <div class="param-group">
        <label for="agreement_year">Agreement start year</label>
        <input type="number" id="agreement_year" value="2030" step="0.1">
    </div>
    <div class="param-group">
        <label for="end_year">End year</label>
        <input type="number" id="end_year" value="2037" step="0.1">
    </div>
    <div class="param-group">
        <label for="increment">Time increment (years)</label>
        <input type="number" id="increment" value="0.1" step="0.01">
    </div>
    <div class="param-group">
        <label for="num_simulations">Number of simulations</label>
        <input type="number" id="num_simulations" value="60" min="1" max="10000">
    </div>

    <h2>PRC Strategy</h2>
    <div class="param-group">
        <label>
            <input type="checkbox" id="run_covert_project" checked>
            Run covert project
        </label>
    </div>
    <div class="param-group">
        <label for="proportion_of_initial_chip_stock_to_divert">Proportion of initial chip stock to divert</label>
        <input type="number" id="proportion_of_initial_chip_stock_to_divert" value="{{ defaults['covert_project_strategy.proportion_of_initial_compute_stock_to_divert'] }}" step="0.01" min="0" max="1">
    </div>

    <h3 style="font-size: 14px; margin-top: 15px; color: #777;">Covert datacenters</h3>
    <div class="param-group">
        <label for="GW_per_initial_datacenter">GW per initial datacenter</label>
        <input type="number" id="GW_per_initial_datacenter" value="{{ defaults['covert_project_strategy.GW_per_initial_datacenter'] }}" step="0.1">
    </div>
    <div class="param-group">
        <label for="number_of_initial_datacenters">Number of initial datacenters</label>
        <input type="number" id="number_of_initial_datacenters" value="{{ defaults['covert_project_strategy.number_of_initial_datacenters'] }}" step="0.1">
    </div>
    <div class="param-group">
        <label for="GW_per_year_of_concealed_datacenters">GW per year of concealed datacenters</label>
        <input type="number" id="GW_per_year_of_concealed_datacenters" value="{{ defaults['covert_project_strategy.GW_per_year_of_concealed_datacenters'] }}" step="0.1">
    </div>

    <h3 style="font-size: 14px; margin-top: 15px; color: #777;">Covert fab</h3>
    <div class="param-group">
        <label>
            <input type="checkbox" id="build_covert_fab" checked>
            Build covert fab
        </label>
    </div>
    <div class="param-group">
        <label for="operating_labor">Number of workers to operate fab</label>
        <input type="number" id="operating_labor" value="{{ defaults['covert_project_strategy.covert_fab_operating_labor'] }}">
    </div>
    <div class="param-group">
        <label for="construction_labor">Number of workers to construct fab</label>
        <input type="number" id="construction_labor" value="{{ defaults['covert_project_strategy.covert_fab_construction_labor'] }}">
    </div>
    <div class="param-group">
        <label for="process_node">Process node strategy</label>
        <select id="process_node">
            <option value="best_indigenous">Best Indigenous</option>
            <option value="best_indigenous_gte_28nm" selected>Best Indigenous >= 28nm</option>
            <option value="best_indigenous_gte_14nm">Best Indigenous >= 14nm</option>
            <option value="best_indigenous_gte_7nm">Best Indigenous >= 7nm</option>
            <option value="nm130">130nm</option>
            <option value="nm28">28nm</option>
            <option value="nm14">14nm</option>
            <option value="nm7">7nm</option>
        </select>
    </div>
    <div class="param-group">
        <label for="scanner_proportion">Proportion of prc sme diverted to covert fab at start of the agreement</label>
        <input type="number" id="scanner_proportion" value="{{ defaults['covert_project_strategy.covert_fab_proportion_of_prc_lithography_scanners_devoted'] }}" step="0.001">
    </div>

    <h2>Covert Project Parameters</h2>

    <div class="param-group">
        <label for="covert_project_parameters.p_project_exists">US prior probability that covert project exists</label>
        <input type="number" id="covert_project_parameters.p_project_exists" value="{{ defaults['covert_project_parameters.p_project_exists'] }}" step="0.01" min="0" max="1">
    </div>

    <div class="param-group has-tooltip" data-tooltip="<strong>Detection Time</strong><br><br>These parameters determine the relationship between workforce size and the probability a covert project is detected over time. We estimated these parameters using online information about historical nuclear programs. Over the past 50 years, about a dozen states attempted to covertly develop nuclear weapons. For each case, we estimated the number of high-context workers involved and the time until detection (see attached data file).<br><br><strong>Functional Form:</strong><br>Detection time is modeled as a log-normal distribution:<br>• Mean detection time: μ(N) = μ₁₀₀ + (μ₁₀₀₀ - μ₁₀₀) × log₁₀(N/100) / log₁₀(10)<br>• Where N is the number of workers<br>• The mean scales logarithmically with workforce size<br>• Standard deviation σ is constant across workforce sizes<br><br>This parameter (μ₁₀₀) represents the expected detection time for a covert project with 100 high-context workers." data-download="/download/nuclear_case_studies">
        <label for="mean_detection_time_100">Expected time to detect covert project involving 100 people (years)</label>
        <input type="number" id="mean_detection_time_100" value="6.95" step="0.01">
    </div>
    <div class="param-group has-tooltip" data-tooltip="<strong>Detection Time</strong><br><br>These parameters determine the relationship between workforce size and the probability a covert project is detected over time. We estimated these parameters using online information about historical nuclear programs. Over the past 50 years, about a dozen states attempted to covertly develop nuclear weapons. For each case, we estimated the number of high-context workers involved and the time until detection (see attached data file).<br><br><strong>Functional Form:</strong><br>Detection time is modeled as a log-normal distribution:<br>• Mean detection time: μ(N) = μ₁₀₀ + (μ₁₀₀₀ - μ₁₀₀) × log₁₀(N/100) / log₁₀(10)<br>• Where N is the number of workers<br>• The mean scales logarithmically with workforce size<br>• Standard deviation σ is constant across workforce sizes<br><br>This parameter (μ₁₀₀₀) represents the expected detection time for a covert project with 1000 high-context workers." data-download="/download/nuclear_case_studies">
        <label for="mean_detection_time_1000">Expected time to detect covert project involving 1000 people (years)</label>
        <input type="number" id="mean_detection_time_1000" value="3.42" step="0.01">
    </div>
    <div class="param-group has-tooltip" data-tooltip="<strong>Detection Time</strong><br><br>These parameters determine the relationship between workforce size and the probability a covert project is detected over time. We estimated these parameters using online information about historical nuclear programs. Over the past 50 years, about a dozen states attempted to covertly develop nuclear weapons. For each case, we estimated the number of high-context workers involved and the time until detection (see attached data file).<br><br><strong>Functional Form:</strong><br>Detection time is modeled as a log-normal distribution:<br>• Mean detection time: μ(N) = μ₁₀₀ + (μ₁₀₀₀ - μ₁₀₀) × log₁₀(N/100) / log₁₀(10)<br>• Where N is the number of workers<br>• The mean scales logarithmically with workforce size<br>• Standard deviation σ is constant across workforce sizes<br><br>This parameter (σ) represents the standard deviation of the log-normal distribution." data-download="/download/nuclear_case_studies">
        <label for="variance_detection_time">Detection time sigma (years)</label>
        <input type="number" id="variance_detection_time" value="3.88" step="0.01">
    </div>

    <h2>Initial PRC Dark Compute Parameters</h2>
    <div class="param-group">
        <label for="total_prc_compute_stock_in_2025">Total PRC compute stock in 2025 (millions of H100e)</label>
        <input type="number" id="total_prc_compute_stock_in_2025" value="{{ defaults['covert_project_parameters.initial_compute_stock_parameters.total_prc_compute_stock_in_2025'] / 1e6 }}" step="0.1">
    </div>
    <div class="param-group">
        <label for="annual_growth_rate_of_prc_compute_stock">Annual growth rate of PRC compute stock (multiplicative)</label>
        <input type="number" id="annual_growth_rate_of_prc_compute_stock" value="{{ defaults['covert_project_parameters.initial_compute_stock_parameters.annual_growth_rate_of_prc_compute_stock'] }}" step="0.1">
    </div>
    <div class="param-group">
        <label for="relative_sigma_of_prc_compute_stock">Relative sigma of PRC compute stock (log scale)</label>
        <input type="number" id="relative_sigma_of_prc_compute_stock" value="{{ defaults['covert_project_parameters.initial_compute_stock_parameters.relative_sigma_of_prc_compute_stock'] }}" step="0.01">
    </div>
    <div class="param-group">
        <label for="us_intelligence_median_error_in_estimate_of_prc_compute_stock">US intelligence median error in estimate of PRC compute stock</label>
        <input type="number" id="us_intelligence_median_error_in_estimate_of_prc_compute_stock" value="{{ defaults['covert_project_parameters.initial_compute_stock_parameters.us_intelligence_median_error_in_estimate_of_prc_compute_stock'] }}" step="0.01">
    </div>
    <div class="param-group has-tooltip"
         data-tooltip="<strong>Energy Efficiency Relative to H100</strong><br><br>This parameter represents how energy-efficient the PRC compute stock is compared to an H100 chip. A value of 0.5 means the chips consume twice as much energy per unit of compute as an H100. A value of 2.0 means they are twice as efficient.<br><br>This is used to calculate total energy consumption based on H100-equivalent compute.">
        <label for="energy_efficiency_relative_to_h100">Energy efficiency relative to H100 (multiplicative)</label>
        <input type="number" id="energy_efficiency_relative_to_h100" value="{{ defaults['covert_project_parameters.initial_compute_stock_parameters.energy_efficiency_relative_to_h100'] }}" step="0.1">
    </div>
    <div class="param-group">
        <label for="total_global_compute_in_2025">Total global compute in 2025 (millions of H100e)</label>
        <input type="number" id="total_global_compute_in_2025" value="{{ defaults['covert_project_parameters.initial_compute_stock_parameters.total_global_compute_in_2025'] / 1e6 }}" step="1">
    </div>
    <div class="param-group">
        <label for="annual_growth_rate_of_global_compute">Annual growth rate of global compute (multiplicative)</label>
        <input type="number" id="annual_growth_rate_of_global_compute" value="{{ defaults['covert_project_parameters.initial_compute_stock_parameters.annual_growth_rate_of_global_compute'] }}" step="0.1">
    </div>
    <div class="param-group">
        <label for="relative_sigma_of_global_compute">Relative sigma of global compute (log scale)</label>
        <input type="number" id="relative_sigma_of_global_compute" value="{{ defaults['covert_project_parameters.initial_compute_stock_parameters.relative_sigma_of_global_compute'] }}" step="0.01">
    </div>
    <div class="param-group">
        <label for="median_unreported_compute_owned_by_non_prc_actors">Median unreported compute owned by non-PRC actors (millions of H100e)</label>
        <input type="number" id="median_unreported_compute_owned_by_non_prc_actors" value="{{ defaults['covert_project_parameters.initial_compute_stock_parameters.median_unreported_compute_owned_by_non_prc_actors'] / 1e6 }}" step="0.1">
    </div>
    <div class="param-group">
        <label for="relative_sigma_unreported_compute_owned_by_non_prc_actors">Relative sigma of unreported compute owned by non-PRC actors (log scale)</label>
        <input type="number" id="relative_sigma_unreported_compute_owned_by_non_prc_actors" value="{{ defaults['covert_project_parameters.initial_compute_stock_parameters.relative_sigma_unreported_compute_owned_by_non_prc_actors'] }}" step="0.1">
    </div>
    <div class="param-group has-tooltip"
         data-tooltip="<strong>H100 Power Consumption</strong><br><br>Total power consumption of NVIDIA H100 GPU during operation. Source: <a href='https://www.nvidia.com/en-us/data-center/h100/' style='color: #6db4ff;' target='_blank'>https://www.nvidia.com/en-us/data-center/h100/</a>">
        <label for="h100_power_watts">H100 power consumption (W)</label>
        <input type="number" id="h100_power_watts" value="{{ defaults['covert_project_parameters.initial_compute_stock_parameters.h100_power_watts'] }}" step="1">
    </div>

    <h2>Survival Rate Parameters</h2>
    <div class="param-group">
        <label for="initial_hazard_rate_p50">Initial hazard rate (median)</label>
        <input type="number" id="initial_hazard_rate_p50" value="{{ defaults['covert_project_parameters.survival_rate_parameters.initial_hazard_rate_p50'] }}" step="0.001">
    </div>
    <div class="param-group">
        <label for="increase_of_hazard_rate_per_year_p50">Increase of hazard rate per year (median)</label>
        <input type="number" id="increase_of_hazard_rate_per_year_p50" value="{{ defaults['covert_project_parameters.survival_rate_parameters.increase_of_hazard_rate_per_year_p50'] }}" step="0.001">
    </div>
    <div class="param-group">
        <label for="hazard_rate_p25_relative_to_p50">Hazard rate 25th percentile (relative to median)</label>
        <input type="number" id="hazard_rate_p25_relative_to_p50" value="{{ defaults['covert_project_parameters.survival_rate_parameters.hazard_rate_p25_relative_to_p50'] }}" step="0.01">
    </div>
    <div class="param-group">
        <label for="hazard_rate_p75_relative_to_p50">Hazard rate 75th percentile (relative to median)</label>
        <input type="number" id="hazard_rate_p75_relative_to_p50" value="{{ defaults['covert_project_parameters.survival_rate_parameters.hazard_rate_p75_relative_to_p50'] }}" step="0.1">
    </div>

    <h2>Covert Datacenter Parameters</h2>
    <div class="param-group">
        <label for="max_proportion_of_PRC_energy_consumption">Max proportion of PRC energy consumption</label>
        <input type="number" id="max_proportion_of_PRC_energy_consumption" value="{{ defaults['covert_project_parameters.datacenter_model_parameters.max_proportion_of_PRC_energy_consumption'] }}" step="0.01">
    </div>
    <div class="param-group">
        <label for="total_GW_of_PRC_energy_consumption">Total GW of PRC energy consumption</label>
        <input type="number" id="total_GW_of_PRC_energy_consumption" value="{{ defaults['covert_project_parameters.datacenter_model_parameters.total_GW_of_PRC_energy_consumption'] }}" step="10">
    </div>
    <div class="param-group">
        <label for="construction_labor_per_MW_per_year">Construction labor per MW per year</label>
        <input type="number" id="construction_labor_per_MW_per_year" value="{{ defaults['covert_project_parameters.datacenter_model_parameters.construction_labor_per_MW_per_year'] }}" step="0.1">
    </div>
    <div class="param-group">
        <label for="relative_sigma_construction_labor_per_MW_per_year">Relative sigma construction labor per MW per year</label>
        <input type="number" id="relative_sigma_construction_labor_per_MW_per_year" value="{{ defaults['covert_project_parameters.datacenter_model_parameters.relative_sigma_construction_labor_per_MW_per_year'] }}" step="0.1">
    </div>
    <div class="param-group">
        <label for="operating_labor_per_MW">Operating labor per MW</label>
        <input type="number" id="operating_labor_per_MW" value="{{ defaults['covert_project_parameters.datacenter_model_parameters.operating_labor_per_MW'] }}" step="0.1">
    </div>
    <div class="param-group">
        <label for="relative_sigma_operating_labor_per_MW">Relative sigma operating labor per MW</label>
        <input type="number" id="relative_sigma_operating_labor_per_MW" value="{{ defaults['covert_project_parameters.datacenter_model_parameters.relative_sigma_operating_labor_per_MW'] }}" step="0.1">
    </div>

    <h2>Covert fab parameters</h2>

    <h3 style="font-size: 14px; margin-top: 15px; color: #777;">Odds of Covert Project</h3>
    <input type="hidden" id="p_fab_exists" value="0.1">
    <div class="param-group has-tooltip" data-tooltip="<strong>SME Inventory Accounting Detection</strong><br><br><strong>Detection Method:</strong><br>US intelligence could detect a covert fab by noticing that equipment is missing from China's domestic semiconductor industry.<br><br><strong>Two Key Factors:</strong><br>1. Amount diverted: Diverting 80 of 100 stockpiled DUV scanners would be obvious; diverting a handful would not.<br>2. Width of USG's error bars: If USG estimates Chinese companies built 50-150 DUV scanners, a dozen missing wouldn't raise suspicion. If USG knows the exact count, it would notice.<br><br><strong>Historical Calibration:</strong><br>Historical intelligence estimates of weapon counts (tanks, nuclear warheads, etc.) from declassified documents (1960-2025) show median errors of ~15%." data-download="/download/us_intelligence_estimates" data-image="/static/error_bars_plot.png" data-image-after-text="<strong>Adjustment for SME Context:</strong><br>15% would be reasonable if the PRC treats SME with nuclear-weapons-level secrecy. However, it's plausible that China's semiconductor industry remains quasi-private with details shared among investors, or that the expansive SME industry is difficult to lock down. Therefore, I estimate that the US intelligence error margin will be ~7% (2x smaller than weapons programs).">
        <label for="proportion_diverted_sme">Median absolute relative error of US intelligence estimate of PRC SME stock</label>
        <input type="number" id="proportion_diverted_sme" value="0.07" step="0.01">
    </div>
    <div class="has-tooltip" style="margin-top: 15px; margin-bottom: 5px; font-size: 13px; color: #666; cursor: help;" data-tooltip="<strong>PRC Semiconductor Manufacturing Equipment (SME) Indigenization</strong><br><br><strong>Why Indigenization Matters for Covert Fabs:</strong><br>The SME market involves very few buyers and sellers globally. If equipment goes missing or can't be accounted for in international supply chains, there are only a handful of actors that could be hiding it—and the PRC would be a highly salient suspect. Therefore, a covert PRC fab would likely need to rely primarily on domestically-produced equipment to avoid detection through procurement accounting.<br><br>These parameters represent the probability that the PRC achieves >90% domestic sourcing of SME at each process node by the specified year. See the attached data file for detailed capabilities by equipment category and process node." data-image-after-text="<strong>Current Status (2025):</strong><br>The PRC can manufacture 130nm chips with mostly domestic tools (~80% localized). More advanced nodes require imported equipment, particularly photolithography scanners.<br><br><strong>Near-Term Progress (by 2031):</strong><br>• <strong>28nm:</strong> SMEE and Huawei-linked Yuliangsheng are developing DUV immersion scanners for 28nm. SMIC plans production integration by 2027. Given typical delays between prototype and production-ready equipment, there's ~25% chance of >90% localization by 2031.<br>• <strong>14nm & 7nm:</strong> Multi-patterning techniques could enable 28nm scanners to reach these nodes, but this requires years of additional development. Lower probability of high localization by 2031 (10% for 14nm, 6% for 7nm).<br><br><strong>Key Accelerants:</strong><br>• U.S. export controls driving indigenization urgency<br>• $47.5B Chinese government SME fund<br>• Aggressive talent recruitment (Huawei recruiting from ASML at 3x salary)<br>• Huawei's ¥12B R&D park with 35,000+ employees<br><br>The main bottleneck is talent (experienced engineers), not funding. Recent investments may start paying off by 2031, but the probability decreases significantly for more advanced nodes." data-image="/static/china_capabilities_table.png" data-download="/download/prc_indigenous_sme_capabilities">
        Probability PRC achieves >90% indiginization at node
    </div>
    <div class="localization-row">
        <div class="param-group">
            <label for="localization_130nm_2025">130nm 2025</label>
            <input type="number" id="localization_130nm_2025" value="0.80" step="0.01" min="0" max="1">
        </div>
        <div class="param-group">
            <label for="localization_130nm_2031">130nm 2031</label>
            <input type="number" id="localization_130nm_2031" value="0.80" step="0.01" min="0" max="1">
        </div>
    </div>
    <div class="localization-row">
        <div class="param-group">
            <label for="localization_28nm_2025">28nm 2025</label>
            <input type="number" id="localization_28nm_2025" value="0.0" step="0.01" min="0" max="1">
        </div>
        <div class="param-group">
            <label for="localization_28nm_2031">28nm 2031</label>
            <input type="number" id="localization_28nm_2031" value="0.25" step="0.01" min="0" max="1">
        </div>
    </div>
    <div class="localization-row">
        <div class="param-group">
            <label for="localization_14nm_2025">14nm 2025</label>
            <input type="number" id="localization_14nm_2025" value="0.0" step="0.01" min="0" max="1">
        </div>
        <div class="param-group">
            <label for="localization_14nm_2031">14nm 2031</label>
            <input type="number" id="localization_14nm_2031" value="0.10" step="0.01" min="0" max="1">
        </div>
    </div>
    <div class="localization-row">
        <div class="param-group">
            <label for="localization_7nm_2025">7nm 2025</label>
            <input type="number" id="localization_7nm_2025" value="0.0" step="0.01" min="0" max="1">
        </div>
        <div class="param-group">
            <label for="localization_7nm_2031">7nm 2031</label>
            <input type="number" id="localization_7nm_2031" value="0.06" step="0.01" min="0" max="1">
        </div>
    </div>

    <hr style="border: none; border-top: 1px solid #ddd; margin: 20px 0;">

    <h3 style="font-size: 14px; margin-top: 15px; color: #777;">Compute Production Rate</h3>
    <div class="param-group has-tooltip"
         data-tooltip="<strong>Fab Construction Time</strong><br><br>Fab construction time depends on production capacity and construction labor. Time from 'breaking ground' to production ranges from 1-3 years for declared fabs.<br><br><img src='/static/construction_time_plot.png' style='width: 100%; max-width: 470px; border-radius: 4px; margin-top: 8px; margin-bottom: 8px;' alt='Construction time vs capacity'><br><br><strong>The Secrecy Tax:</strong><br>Covert fabs may take longer due to secrecy requirements. Comparing declared vs undeclared nuclear enrichment facilities: declared took 3.7 years on average, undeclared took 5.5 years - a 1.5x 'secrecy tax'.<br><br>So realistic timeframes for covert fabs: 1.5-4.5 years.<br><br><img src='/static/construction_time_plot_adjusted.png' style='width: 100%; max-width: 470px; border-radius: 4px; margin-top: 8px; margin-bottom: 8px;' alt='Adjusted construction time'><br><br><strong>Construction Labor:</strong><br>How does fab construction time depend on construction labor? McKinsey claims that 'about 100 workers are dedicated to the construction phase' for approximately every $1 billion spent on fab construction. Looking at a couple of examples, this claim appears to be roughly accurate.<br><br>Now, here's the cost of constructing a fab given its production capacity:<br><br><img src='/static/cost_of_fab_plot.png' style='width: 100%; max-width: 470px; border-radius: 4px; margin-top: 8px; margin-bottom: 8px;' alt='Production capacity vs cost'><br><br>Our model predicts the production capacity based on operating labor and SME inputs. So we can predict the construction labor that would typically be required by first estimating the cost of the project, and then using the heuristic that 100 concurrent workers are needed for every $1 billion USD.<br><br>But what if the provided construction labor falls short of this standard requirement? Then, we assume that if X times less construction labor is provided, construction will move X times slower. Conversely, if construction labor is oversupplied, then we assume that there's no speedup (which corresponds to the simple 'fixed-ratios' production function).<br><br><img src='/static/construction_time_vs_labor.png' style='width: 100%; max-width: 470px; border-radius: 4px; margin-top: 8px; margin-bottom: 8px;' alt='Construction time vs labor'>"
         data-download="/download/construction_time_vs_fab_capacity">
        <label for="construction_time_5k">Construction time of 5k wafers/month fab (years)</label>
        <input type="number" id="construction_time_5k" value="1.40" step="0.01">
    </div>
    <div class="param-group has-tooltip"
         data-tooltip="<strong>Fab Construction Time</strong><br><br>Fab construction time depends on production capacity and construction labor. Time from 'breaking ground' to production ranges from 1-3 years for declared fabs.<br><br><img src='/static/construction_time_plot.png' style='width: 100%; max-width: 470px; border-radius: 4px; margin-top: 8px; margin-bottom: 8px;' alt='Construction time vs capacity'><br><br><strong>The Secrecy Tax:</strong><br>Covert fabs may take longer due to secrecy requirements. Comparing declared vs undeclared nuclear enrichment facilities: declared took 3.7 years on average, undeclared took 5.5 years - a 1.5x 'secrecy tax'.<br><br>So realistic timeframes for covert fabs: 1.5-4.5 years.<br><br><img src='/static/construction_time_plot_adjusted.png' style='width: 100%; max-width: 470px; border-radius: 4px; margin-top: 8px; margin-bottom: 8px;' alt='Adjusted construction time'><br><br><strong>Construction Labor:</strong><br>How does fab construction time depend on construction labor? McKinsey claims that 'about 100 workers are dedicated to the construction phase' for approximately every $1 billion spent on fab construction. Looking at a couple of examples, this claim appears to be roughly accurate.<br><br>Now, here's the cost of constructing a fab given its production capacity:<br><br><img src='/static/cost_of_fab_plot.png' style='width: 100%; max-width: 470px; border-radius: 4px; margin-top: 8px; margin-bottom: 8px;' alt='Production capacity vs cost'><br><br>Our model predicts the production capacity based on operating labor and SME inputs. So we can predict the construction labor that would typically be required by first estimating the cost of the project, and then using the heuristic that 100 concurrent workers are needed for every $1 billion USD.<br><br>But what if the provided construction labor falls short of this standard requirement? Then, we assume that if X times less construction labor is provided, construction will move X times slower. Conversely, if construction labor is oversupplied, then we assume that there's no speedup (which corresponds to the simple 'fixed-ratios' production function).<br><br><img src='/static/construction_time_vs_labor.png' style='width: 100%; max-width: 470px; border-radius: 4px; margin-top: 8px; margin-bottom: 8px;' alt='Construction time vs labor'>"
         data-download="/download/construction_time_vs_fab_capacity">
        <label for="construction_time_100k">Construction time of 100k wafers/month fab (years)</label>
        <input type="number" id="construction_time_100k" value="2.41" step="0.01">
    </div>
    <div class="param-group has-tooltip"
         data-tooltip="<strong>Fab Construction Time</strong><br><br>Fab construction time depends on production capacity and construction labor. Time from 'breaking ground' to production ranges from 1-3 years for declared fabs.<br><br><img src='/static/construction_time_plot.png' style='width: 100%; max-width: 470px; border-radius: 4px; margin-top: 8px; margin-bottom: 8px;' alt='Construction time vs capacity'><br><br><strong>The Secrecy Tax:</strong><br>Covert fabs may take longer due to secrecy requirements. Comparing declared vs undeclared nuclear enrichment facilities: declared took 3.7 years on average, undeclared took 5.5 years - a 1.5x 'secrecy tax'.<br><br>So realistic timeframes for covert fabs: 1.5-4.5 years.<br><br><img src='/static/construction_time_plot_adjusted.png' style='width: 100%; max-width: 470px; border-radius: 4px; margin-top: 8px; margin-bottom: 8px;' alt='Adjusted construction time'><br><br><strong>Construction Labor:</strong><br>How does fab construction time depend on construction labor? McKinsey claims that 'about 100 workers are dedicated to the construction phase' for approximately every $1 billion spent on fab construction. Looking at a couple of examples, this claim appears to be roughly accurate.<br><br>Now, here's the cost of constructing a fab given its production capacity:<br><br><img src='/static/cost_of_fab_plot.png' style='width: 100%; max-width: 470px; border-radius: 4px; margin-top: 8px; margin-bottom: 8px;' alt='Production capacity vs cost'><br><br>Our model predicts the production capacity based on operating labor and SME inputs. So we can predict the construction labor that would typically be required by first estimating the cost of the project, and then using the heuristic that 100 concurrent workers are needed for every $1 billion USD.<br><br>But what if the provided construction labor falls short of this standard requirement? Then, we assume that if X times less construction labor is provided, construction will move X times slower. Conversely, if construction labor is oversupplied, then we assume that there's no speedup (which corresponds to the simple 'fixed-ratios' production function).<br><br><img src='/static/construction_time_vs_labor.png' style='width: 100%; max-width: 470px; border-radius: 4px; margin-top: 8px; margin-bottom: 8px;' alt='Construction time vs labor'>"
         data-download="/download/construction_time_vs_fab_capacity">
        <label for="construction_time_sigma">Construction time vs wafers per month sigma (relative, log scale)</label>
        <input type="number" id="construction_time_sigma" value="0.35" step="0.01">
    </div>
    <div class="param-group">
        <label for="construction_workers_per_1000">Construction workers per 1000 wafers/month</label>
        <input type="number" id="construction_workers_per_1000" value="14.1" step="0.1">
    </div>
    <div class="param-group has-tooltip" data-tooltip="<strong>Operating Labor and Fab Production Capacity</strong><br><br>Fab production capacity depends on two main factors:<br>• Operating labor<br>• Quantity of SME<br><br>The relationship between the number of workers involved in operating a fab and its production capacity is shown in the attached plot, which displays wafers per month vs operating labor.<br><br>This regression trend is used in the model to estimate production capacity based on the allocated operating workforce.<br><br><strong>Production Function:</strong><br>The model uses a fixed-proportions production function where fab output is the minimum of labor and scanner constraints:<br><br>Production = min(24.6 × operating labor, 1000 × num scanners)" data-image="/static/labor_vs_production.png" data-download="/download/compute_production_vs_operating_labor">
        <label for="wafers_per_month_per_worker">Wafers/month per operating worker</label>
        <input type="number" id="wafers_per_month_per_worker" value="24.64" step="0.01">
    </div>
    <div class="param-group has-tooltip" data-tooltip="<strong>Operating Labor and Fab Production Capacity</strong><br><br>Fab production capacity depends on two main factors:<br>• Operating labor<br>• Quantity of SME<br><br>The relationship between the number of workers involved in operating a fab and its production capacity is shown in the attached plot, which displays wafers per month vs operating labor.<br><br>This regression trend is used in the model to estimate production capacity based on the allocated operating workforce.<br><br><strong>Production Function:</strong><br>The model uses a fixed-proportions production function where fab output is the minimum of labor and scanner constraints:<br><br>Production = min(24.6 × operating labor, 1000 × num scanners)" data-image="/static/labor_vs_production.png" data-download="/download/compute_production_vs_operating_labor">
        <label for="labor_productivity_sigma">Wafers per month per operating worker sigma (log scale, wafers/month)</label>
        <input type="number" id="labor_productivity_sigma" value="0.62" step="0.01">
    </div>
    <div class="param-group has-tooltip" data-tooltip="<strong>Photolithography Scanner Production Capacity</strong><br><br>Advanced photolithography scanners are often the main bottleneck to chip production. ASML claims that its DUV lithography machines can pattern around 250 wafers per hour, or 180,000 wafers per month.<br><br>However, each chip typically requires around 80 patterning steps and scanners operate at roughly 50% utilization. Therefore, each machine processes approximately:<br><br>0.5 × 180,000 / 80 = 1,000 completed wafers per month<br><br><strong>Production Function:</strong><br>The model uses a fixed-proportions production function where fab output is the minimum of labor and scanner constraints:<br><br>Production = min(24.6 × operating labor, 1000 × num scanners)">
        <label for="wafers_per_month_per_scanner">Wafers/month per photolithography scanner</label>
        <input type="number" id="wafers_per_month_per_scanner" value="1000" step="1">
    </div>
    <div class="param-group">
        <label for="scanner_productivity_sigma">Wafers per month per photolithography scanner sigma (log scale, wafers/month)</label>
        <input type="number" id="scanner_productivity_sigma" value="0.20" step="0.01">
    </div>
    <div class="param-group has-tooltip" data-tooltip="<strong>PRC Lithography Scanner Production Ramp-Up</strong><br><br>To estimate the total number of indigenous lithography scanners the PRC has at a given time, we model their production ramp-up based on historical ASML scaling patterns.<br><br>The attached plot shows how quickly ASML scaled production of a given lithography machine after it was first used in high volume production. The model assumes that PRC photolithography scanner production follows a similar trend (shown as the orange trendline) starting from the date when the PRC achieves high volume production at a given node.<br><br>This parameter represents the number of scanners produced in the first year after achieving high volume production capability." data-image="/static/lithography_sales_plot.png" data-download="/download/asml_sales_history">
        <label for="prc_scanners_first_year">Prc scanners produced in first year after high volume production is achieved</label>
        <input type="number" id="prc_scanners_first_year" value="20.0" step="1">
    </div>
    <div class="param-group has-tooltip" data-tooltip="<strong>PRC Lithography Scanner Production Ramp-Up</strong><br><br>To estimate the total number of indigenous lithography scanners the PRC has at a given time, we model their production ramp-up based on historical ASML scaling patterns.<br><br>The attached plot shows how quickly ASML scaled production of a given lithography machine after it was first used in high volume production. The model assumes that PRC photolithography scanner production follows a similar trend (shown as the orange trendline) starting from the date when the PRC achieves high volume production at a given node.<br><br>This parameter represents the annual increase in scanner production after the first year." data-image="/static/lithography_sales_plot.png" data-download="/download/asml_sales_history">
        <label for="prc_scanners_per_year">Annual increase of scanner production</label>
        <input type="number" id="prc_scanners_per_year" value="16.0" step="1">
    </div>
    <div class="param-group">
        <label for="prc_scanner_production_sigma">Prc scanner production sigma (log scale, scanners/year)</label>
        <input type="number" id="prc_scanner_production_sigma" value="0.30" step="0.01">
    </div>
    <div class="param-group has-tooltip"
         data-tooltip="<strong>H100-sized Chips per Wafer (Yield)</strong><br><br>The value of 28 H100-sized chips per wafer represents the yield that TSMC achieved when manufacturing H100s for NVIDIA.<br><br>Source: <a href='https://www.trendforce.com/news/2024/03/18/news-tsmc-boosts-investment-in-advanced-packaging-with-ntd-500-billion-plan-to-build-six-plants-in-chiayi-science-park/' style='color: #6db4ff;' target='_blank'>TrendForce (March 2024)</a>">
        <label for="chips_per_wafer">H100-sized chips per wafer (yield)</label>
        <input type="number" id="chips_per_wafer" value="28" step="1">
    </div>
    <div class="param-group has-tooltip"
         data-tooltip="<strong>Transistor Density</strong><br><br>Transistor density depends on the process node - the resolution at which circuits can be patterned onto the wafer. Historical data shows how transistor density (in millions of transistors per mm²) varies across different process nodes.<br><br>The figure below shows the relationship between process node (bottom axis) and H100 equivalents per wafer with 2022 architectures (left axis). This assumes a yield of 28 H100-sized chips per wafer."
         data-image="/static/h100_equiv_per_year_vs_process_node.png"
         data-download="/download/transistor_density_vs_node">
        <label for="transistor_density_exponent">Transistor density increase for every halving of process node</label>
        <input type="number" id="transistor_density_exponent" value="1.49" step="0.01">
    </div>
    <div class="param-group has-tooltip"
         data-tooltip="<strong>Architecture Efficiency</strong><br><br>Over time, chip architectures improve and chips deliver more performance. To predict these improvements, we infer architecture efficiency by comparing how total chip performance has improved versus transistor density improvements.<br><br>According to <a href='https://epoch.ai/blog/trends-in-machine-learning-hardware' style='color: #6db4ff;'>Epoch's data</a>, total performance (TPP/Die Area) has improved at roughly 1.55x per year:<br><br><img src='/static/tpp_per_die_area.png' style='width: 100%; max-width: 470px; border-radius: 4px; margin-top: 8px; margin-bottom: 8px;' alt='TPP per die area over time'><br><br>However, transistor density has only increased at 1.26x per year:<br><br><img src='/static/transistor_density_over_time.png' style='width: 100%; max-width: 470px; border-radius: 4px; margin-top: 8px; margin-bottom: 8px;' alt='Transistor density over time'><br><br>Therefore, architecture improvements have increased TPP/Die Area by around 1.55 / 1.26 = <strong>1.23x per year</strong>.">
        <label for="architecture_efficiency">Rate of architecture efficiency improvement per year</label>
        <input type="number" id="architecture_efficiency" value="1.23" step="0.01">
    </div>

    <hr style="border: none; border-top: 1px solid #ddd; margin: 20px 0;">

    <h3 style="font-size: 14px; margin-top: 15px; color: #777;">Energy Requirements</h3>
    <div class="param-group has-tooltip"
         data-tooltip="<strong>W/TPP vs Density Exponent (Before Dennard Scaling End)</strong><br><br>Energy efficiency (watts per tera-parameter-pass) scales with transistor density following a power law: W/TPP ∝ (transistor_density)^exponent. Before Dennard scaling ended in ~2006, voltage could scale down with transistor size, leading to more aggressive efficiency improvements with density.<br><br>We estimated the value of this parameter using Epoch's AI hardware trends: <a href='https://epoch.ai/blog/trends-in-machine-learning-hardware' style='color: #6db4ff;' target='_blank'>https://epoch.ai/blog/trends-in-machine-learning-hardware</a>"
         data-image="/static/energy_efficiency_vs_transistors.png">
        <label for="watts_per_tpp_exponent_before_dennard">W/TPP vs density exponent (before Dennard scaling end, ≤2006)</label>
        <input type="number" id="watts_per_tpp_exponent_before_dennard" value="{{ defaults['covert_project_parameters.covert_fab_parameters.watts_per_tpp_vs_transistor_density_exponent_before_dennard_scaling_ended'] }}" step="0.01">
    </div>
    <div class="param-group has-tooltip"
         data-tooltip="<strong>W/TPP vs Density Exponent (After Dennard Scaling End)</strong><br><br>Energy efficiency (watts per tera-parameter-pass) scales with transistor density following a power law: W/TPP ∝ (transistor_density)^exponent. After Dennard scaling ended in ~2006, voltage scaling stalled, changing how efficiency improves with density. The exponent became less negative, meaning efficiency improvements slowed down.<br><br>We estimated the value of this parameter using Epoch's AI hardware trends: <a href='https://epoch.ai/blog/trends-in-machine-learning-hardware' style='color: #6db4ff;' target='_blank'>https://epoch.ai/blog/trends-in-machine-learning-hardware</a>"
         data-image="/static/energy_efficiency_vs_transistors.png">
        <label for="watts_per_tpp_exponent_after_dennard">W/TPP vs density exponent (after Dennard scaling end, >2006)</label>
        <input type="number" id="watts_per_tpp_exponent_after_dennard" value="{{ defaults['covert_project_parameters.covert_fab_parameters.watts_per_tpp_vs_transistor_density_exponent_after_dennard_scaling_ended'] }}" step="0.001">
    </div>
    <div class="param-group has-tooltip"
         data-tooltip="<strong>Transistor Density at Dennard Scaling End</strong><br><br>Dennard scaling refers to the historical period when voltage could scale down proportionally with transistor size. This ended around 2006 when voltage scaling hit physical limits. This parameter specifies the transistor density (in millions of transistors per mm²) at which this transition occurred.<br><br>We estimated the value of this parameter using Epoch's AI hardware trends: <a href='https://epoch.ai/blog/trends-in-machine-learning-hardware' style='color: #6db4ff;' target='_blank'>https://epoch.ai/blog/trends-in-machine-learning-hardware</a>"
         data-image="/static/energy_efficiency_vs_transistors.png">
        <label for="transistor_density_at_dennard_end">Transistor density at Dennard scaling end (M/mm², ~2006)</label>
        <input type="number" id="transistor_density_at_dennard_end" value="{{ defaults['covert_project_parameters.covert_fab_parameters.transistor_density_at_end_of_dennard_scaling_m_per_mm2'] }}" step="0.01">
    </div>
</div>
